import{z as F,o as v,c as b,a as w,y as T,b as C,u as P,n as p,A as Z,B as z,w as j,C as W,F as ie,r as re,x as K,k as U,j as V,E as ce,G as ue,H as de,I as fe,J as G,K as me,g as $,L as he,M as ee,i as M,N as te,O as ne,h as k,t as H,T as pe,P as ge,Q,R as ve,e as ye,S as we,U as be,D as _e,V as xe}from"./index.c341c51c.js";const N=(e,t)=>{const a=e.__vccOpts||e;for(const[s,i]of t)a[s]=i;return a},Ce={"aria-hidden":"true"},ke=["href","fill"],Ee={name:"SvgIcon"},B=Object.assign(Ee,{props:{name:{type:String,required:!0},color:{type:String},fillClass:{type:String}},setup(e){const t=e,a=F(()=>`#icon-${t.name}`);return(s,i)=>(v(),b("svg",Ce,[w("use",{class:T(e.fillClass),href:C(a),fill:e.color},null,10,ke)]))}});const Se={name:"Waterfall"},Ie=Object.assign(Se,{props:{data:{type:Array,required:!0,default:[]},keyProp:{type:String},columns:{default:2,type:Number},columnSpacing:{default:20,type:Number},rowSpacing:{default:20,type:Number},preload:{type:Boolean,default:!0}},setup(e){const t=e;P();const a=p(0);let s=[];const i=p(null),d=p(0),u=p(0),m=p(0),h=F(()=>(t.columns-1)*t.columnSpacing);let n=[];const o=p(!0);let c;const r=l=>{var y,R;const g={opacity:o.value?0:1,width:m.value+"px"};return((y=l._style)==null?void 0:y.left)!=null&&(g.left=l._style.left+"px"),((R=l._style)==null?void 0:R.top)!=null&&(g.top=l._style.top+"px"),g},f=()=>{s=[];for(let l=0;l<t.columns;l++)s[l]=0},E=()=>{const{paddingLeft:l,paddingRight:g}=getComputedStyle(i.value,null);u.value=parseFloat(l),d.value=i.value.offsetWidth-parseFloat(l)-parseFloat(g)},S=()=>{E(),m.value=(d.value-h.value)/t.columns};Z(()=>{S()});const I=()=>{n=[];let l=[...document.getElementsByClassName("waterfall-item")];if(l.length===0){a.value=0,o.value=!1;return}const g=ce(l),y=ue(g);de(y).then(()=>{l.forEach(le=>{n.push(le.offsetHeight+15)}),x(),o.value=!1})},A=()=>{n=[],[...document.getElementsByClassName("waterfall-item")].forEach(l=>{n.push(l.offsetHeight+15)}),x()},x=()=>{t.data.forEach((l,g)=>{l._style||(l._style={},l._style.left=_(),l._style.top=oe(),se(n[g]))}),a.value=fe(s)},_=()=>G(s)*(m.value+t.columnSpacing)+u.value,oe=()=>me(s),se=l=>{const g=G(s);s[g]+=l+t.rowSpacing};z(()=>{t.data.forEach(l=>{delete l._style}),c!=null&&clearTimeout(c)}),j(()=>t.data,l=>{o.value=!0,l.every(y=>!y._style)&&f(),W(()=>{t.preload?I():A()})},{immediate:!0,deep:!0});const q=()=>{o.value=!0,c!=null&&clearTimeout(c),c=setTimeout(()=>{S(),t.data.forEach(l=>{l._style=null})},500)};return j(()=>t.columns,()=>{t.preload?(m.value=0,W(q)):q()}),(l,g)=>(v(),b("div",{class:"relative",ref_key:"containerDivRef",ref:i,style:K({height:a.value+"px"})},[m.value&&e.data.length?(v(!0),b(ie,{key:0},re(e.data,y=>(v(),b("div",{class:"waterfall-item",key:e.keyProp?y[e.keyProp]:y.id,style:K(r(y))},[U(l.$slots,"default",{item:y,width:m.value},void 0,!0)],4))),128)):V("",!0)],4))}}),Le=N(Ie,[["__scopeId","data-v-8a3022b3"]]),Te=["onClick"],D={primary:"text-white bg-zinc-800 dark:bg-zinc-900 hover:bg-zinc-900 dark:hover:bg-zinc-700 active:bg-zinc-800 dark:active:bg-zinc-700",main:"text-white bg-main dark:bg-zinc-900 hover:bg-hover-main dark:hover:bg-zinc-700 active:bg-main dark:active:bg-zinc-700",info:"text-zinc-800 dark:text-zinc-300 bg-zinc-200 dark:bg-zinc-700 hover:bg-zinc-300 dark:hover:bg-zinc-600 active:bg-zinc-200 dark:active:bg-zinc-700"},O={default:{button:"w-8 h-4 text-base",icon:""},"icon-default":{button:"w-4 h-4",icon:"w-2 h-2"},small:{button:"w-7 h-3 text-base",icon:""},"icon-small":{button:"w-3 h-3",icon:"w-1.5 h-1.5"},large:{button:"w-10 h-4 text-base",icon:""},"icon-large":{button:"w-5 h-5",icon:"w-3 h-3"}},X="click",je={name:"TypeButton",data(){return{typeEnum:D,sizeEnum:O}}},J=Object.assign(je,{props:{icon:String,iconColor:String,iconClass:String,type:{type:String,default:"main",validator(e){const t=Object.keys(D),a=t.includes(e);if(!a)throw new Error(`\u6307\u5B9A\u306E type \u306F ${t.join("\u3001")}\u306E\u4E2D\u306E\u4E00\u3064\u51FA\u306A\u3051\u308C\u3070\u306A\u3089\u306A\u3044`);return a}},size:{type:String,default:"default",validator(e){const t=Object.keys(O).filter(s=>!s.includes("icon")),a=t.includes(e);if(!a)throw new Error(`\u6307\u5B9A\u306E\u5024\u306F ${t.join("\u3001")} \u306E\u4E2D\u306E\u4E00\u3064\u51FA\u306A\u3051\u308C\u3070\u306A\u3089\u306A\u3044`);return a}},animation:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:[X],setup(e,{emit:t}){const a=e,s=F(()=>a.icon?"icon-"+a.size:a.size),i=()=>{a.loading||t(X)};return(d,u)=>(v(),b("button",{class:T(["text-sm text-center duration-150 flex justify-center items-center",[D[e.type],O[C(s)].button,{"active:scale-105":e.animation}]]),onClick:he(i,["stop"])},[e.loading?(v(),$(B,{key:0,name:"loading",class:"w-2 h-2 animate-spin mr-1"})):V("",!0),e.icon?(v(),$(B,{key:1,name:e.icon,class:T(["m-auto",O[C(s)].icon]),color:e.iconColor,fillClass:e.iconClass},null,8,["name","class","color","fillClass"])):U(d.$slots,"default",{key:2})],10,Te))}});var L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ae={exports:{}};(function(e,t){(function(a,s){s()})(L,function(){function a(n,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function s(n,o,c){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){h(r.response,o,c)},r.onerror=function(){console.error("could not download file")},r.send()}function i(n){var o=new XMLHttpRequest;o.open("HEAD",n,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function d(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(o)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof L=="object"&&L.global===L?L:void 0,m=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(n,o,c){var r=u.URL||u.webkitURL,f=document.createElement("a");o=o||n.name||"download",f.download=o,f.rel="noopener",typeof n=="string"?(f.href=n,f.origin===location.origin?d(f):i(f.href)?s(n,o,c):d(f,f.target="_blank")):(f.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(f.href)},4e4),setTimeout(function(){d(f)},0))}:"msSaveOrOpenBlob"in navigator?function(n,o,c){if(o=o||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(a(n,c),o);else if(i(n))s(n,o,c);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){d(r)})}}:function(n,o,c,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return s(n,o,c);var f=n.type==="application/octet-stream",E=/constructor/i.test(u.HTMLElement)||u.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||f&&E||m)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var _=I.result;_=S?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=_:location=_,r=null},I.readAsDataURL(n)}else{var A=u.URL||u.webkitURL,x=A.createObjectURL(n);r?r.location=x:location.href=x,r=null,setTimeout(function(){A.revokeObjectURL(x)},4e4)}});u.saveAs=h.saveAs=h,e.exports=h})})(ae);const Y=["success","warn","error"],ze={name:"MessageBoxVue"},Ae=Object.assign(ze,{props:{type:{type:String,required:!0,validator(e){const t=Y.includes(e);if(!t)throw new Error(`type\u306E\u5024\u306F ${Y.join("\u3001")} \u306E\u4E2D\u306E\u4E00\u3064\u51FA\u306A\u3051\u308C\u3070\u306A\u3089\u306A\u3044`);return t}},content:{type:String,required:!0},duration:{type:Number,default:ee},destroy:{type:Function}},setup(e){const t=e,a={warn:{icon:"warn",fillClass:"fill-warn-300",textClass:"text-warn-300",containerClass:"bg-warn-100 border-warn-200  hover:shadow-lg hover:shadow-warn-100"},error:{icon:"error",fillClass:"fill-error-300",textClass:"text-error-300",containerClass:"bg-error-100 border-error-200  hover:shadow-lg hover:shadow-error-100"},success:{icon:"success",fillClass:"fill-success-300",textClass:"text-success-300",containerClass:"bg-success-100 border-success-200  hover:shadow-lg hover:shadow-success-100"}},s=p(!1);let i;return Z(()=>{s.value=!0,i=setTimeout(()=>{s.value=!1},t.duration)}),z(()=>{i&&clearTimeout(i)}),(d,u)=>(v(),$(pe,{name:"down",onAfterLeave:e.destroy},{default:M(()=>[te(w("div",{class:T(["min-w-[320px] fixed top-[20px] left-[50%] translate-x-[-50%] z-50 flex items-center px-3 py-1.5 rounded-sm border cursor-pointer",a[e.type].containerClass])},[k(B,{name:a[e.type].icon,fillClass:a[e.type].fillClass,class:"h-1.5 w-1.5 mr-1.5"},null,8,["name","fillClass"]),w("span",{class:T(["text-sm",a[e.type].textClass])},H(e.content),3)],2),[[ne,s.value]])]),_:1},8,["onAfterLeave"]))}}),Oe=N(Ae,[["__scopeId","data-v-7ab3c036"]]),$e=(e,t,a=ee)=>{const i=ge(Oe,{type:e,content:t,duration:a,destroy:()=>{Q(null,document.body)}});Q(i,document.body)};const Be={class:"photo-item-container"},Re={class:"relative w-full rounded group"},Me=["src","alt"],He={class:"photo-item-mask"},De={class:"photo-item-title line-clamp-2"},Fe={class:"photo-item-author"},Pe=["src","alt"],Ue={class:"photo-item-author-name"},Ve={name:"PhotoItem"},Ne=Object.assign(Ve,{props:{data:{type:Object,required:!0},width:{type:Number,default:0}},setup(e){const t=e,a=p(null),{enter:s}=ve(a);let i;const d=()=>{$e("success","\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u59CB\u307E\u308A\u307E\u3059"),i=setTimeout(()=>{ae.exports.saveAs(t.data.url,`${t.data.title}-${t.data.author}`)},500)};return z(()=>{i&&clearTimeout(i)}),(u,m)=>(v(),b("div",Be,[w("div",Re,[w("img",{ref_key:"imgRef",ref:a,class:"photo-item-img",src:e.data.url,alt:e.data.title},null,8,Me),w("div",He,[k(J,{class:"absolute bottom-1.5 left-1.5 rounded-md bg-zinc-300",type:"info",icon:"download",iconClass:"fill-zinc-900 dark:fill-zinc-200",onClick:d}),k(J,{class:"absolute bottom-1.5 right-1.5 rounded-md bg-zinc-300",type:"info",icon:"full",iconClass:"fill-zinc-900 dark:fill-zinc-200",onClick:C(s)},null,8,["onClick"])])]),w("p",De,H(e.data.title),1),w("div",Fe,[w("img",{class:"photo-item-author-avatar",src:e.data.avatar,alt:e.data.avatar},null,8,Pe),w("span",Ue,H(e.data.author),1)])]))}}),qe=N(Ne,[["__scopeId","data-v-e5895705"]]),We={key:0,class:"text-center text-base text-zinc-400"},Ke={name:"InfiniteList"},Ge=Object.assign(Ke,{props:{modelValue:{type:Boolean,required:!0},finished:{type:Boolean,default:!1}},emits:["onLoad","update:modelValue"],setup(e,{expose:t,emit:a}){const s=e;P();const i=ye(s),d=p(null),u=p(!1);t({targetIsIntersecting:u}),we(d,([{isIntersecting:n}],o)=>{u.value=n,m()});const m=()=>{u.value&&!i.value&&!s.finished&&(i.value=!0,a("onLoad"))};let h;return j(i,()=>{h=setTimeout(()=>{m()},500)}),z(()=>{h&&clearTimeout(h)}),(n,o)=>(v(),b("div",null,[U(n.$slots,"default"),w("div",{ref_key:"targetRef",ref:d,class:"h-6 py-4"},[te(k(B,{class:"w-4 h-4 mx-auto animate-spin",name:"infinite-load",color:"#A1A1AA"},null,512),[[ne,C(i)&&!e.finished]]),e.finished?(v(),b("p",We,"\u5168\u3066\u306E\u5199\u771F\u3092\u30ED\u30FC\u30C9\u3057\u307E\u3057\u305F")):V("",!0)],512)]))}}),Qe={name:"PhotoList"},Ye=Object.assign(Qe,{setup(e){const t=p(!1),a=p(!1),s=p([]),i=p(null);let d={page:0,categoryId:0,title:"",count:8};const u=P();let m=xe,h;const n=()=>{if(a.value){t.value=!1;return}if(s.value.length>=m){a.value=!0,t.value=!1;return}d.page=d.page+1,h=setTimeout(()=>{_e.getInstance().getPhotos(d).then(c=>{s.value=[...s.value,...c.data],m=c.total,t.value=!1})},500)},o=c=>{d={...d,...c},a.value=!1,t.value=!1,s.value=[]};return j(()=>u.getters.currentCategory,c=>{o({page:0,title:u.getters.searchText,categoryId:c.id}),i.value.targetIsIntersecting&&(t.value=!0,n())}),j(()=>u.getters.searchText,c=>{o({page:0,title:c,categoryId:0}),i.value.targetIsIntersecting&&(t.value=!0,n())}),z(()=>{h&&clearTimeout(h)}),(c,r)=>(v(),$(Ge,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=f=>t.value=f),finished:a.value,onOnLoad:n,ref_key:"photoListRef",ref:i},{default:M(()=>[k(Le,{data:s.value,keyProp:"id",columns:C(be)()?2:4,preload:!0,class:"w-full px-1"},{default:M(({item:f,width:E})=>[k(qe,{data:f,width:E},null,8,["data","width"])]),_:1},8,["data","columns"])]),_:1},8,["modelValue","finished"]))}});export{$e as M,N as _,B as a,Ye as b,J as c,Je as g};
